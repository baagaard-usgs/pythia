FROM debian:stable as os-update
LABEL maintainer="Brad Aagaard <baagaard@usgs.gov>"

RUN apt-get update \
    && apt-get install -y --no-install-recommends \
       curl \
       python-dev \
       libpython2.7 \
       python-setuptools \
       python-coverage \
       zlib1g-dev \
       unzip \
       ca-certificates \
       vim-common \
       vim-runtime \
       vim-nox
    
COPY docker/certs/ /usr/local/share/ca-certificates
RUN update-ca-certificates

ENV PYTHON_VERSION 2.7

# ----------------------------------------
from os-update as clean

USER root
RUN rm -fr $BUILD_DIR && unset BUILD_DIR
RUN apt-get clean

# Setup user and environment
USER $PYTHIA_USER
WORKDIR /home/$PYTHIA_USER


CMD /bin/bash
